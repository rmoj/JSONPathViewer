<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- <meta http-equiv="X-UA-Compatible" content="ie=edge"> -->
  <title>Document</title>
  <!-- <link rel="stylesheet" href="assets/css/reset.css"> -->
  <!-- <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous"> -->
  <!-- <link rel="stylesheet" href="assets/css/style.css"> -->
  <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
  <!-- <script src="https://www.gstatic.com/firebasejs/5.2.0/firebase.js"></script> -->
</head>

<body>
  <div id="output"></div>

  <script type="text/javascript">


    var obj = { animal1: { dog: { one: 'puppy', two: 'pup', three: { twenty: 'mutt' } }, cat: 'kitten' }, animal2: { quokka: 'joey', lion: 'cub' }, animal3: { pig: 'piglet', horse: 'pony' } };

    var arr = [{ quokka: 'joey' }, { lion: 'cub' }, { pig: 'piglet' }];

    var arr2 = [{ animal1: { dog: { one: 'puppy', two: 'pup', three: 'mutt' }, cat: 'kitten' }, animal2: { quokka: 'joey', lion: 'cub' }, animal3: { pig: 'piglet', horse: 'pony' } }];

    var testObj = [
      {
        "id": "0001",
        "type": "donut",
        "name": "Cake",
        "ppu": 0.55,
        "batters":
        {
          "batter":
            [
              { "id": "1001", "type": "Regular" },
              { "id": "1002", "type": "Chocolate" },
              { "id": "1003", "type": "Blueberry" },
              { "id": "1004", "type": "Devil's Food" }
            ]
        },
        "topping":
          [
            { "id": "5001", "type": "None" },
            { "id": "5002", "type": "Glazed" },
            { "id": "5005", "type": "Sugar" },
            { "id": "5007", "type": "Powdered Sugar" },
            { "id": "5006", "type": "Chocolate with Sprinkles" },
            { "id": "5003", "type": "Chocolate" },
            { "id": "5004", "type": "Maple" }
          ]
      },
      {
        "id": "0002",
        "type": "donut",
        "name": "Raised",
        "ppu": 0.55,
        "batters":
        {
          "batter":
            [
              { "id": "1001", "type": "Regular" }
            ]
        },
        "topping":
          [
            { "id": "5001", "type": "None" },
            { "id": "5002", "type": "Glazed" },
            { "id": "5005", "type": "Sugar" },
            { "id": "5003", "type": "Chocolate" },
            { "id": "5004", "type": "Maple" }
          ]
      },
      {
        "id": "0003",
        "type": "donut",
        "name": "Old Fashioned",
        "ppu": 0.55,
        "batters":
        {
          "batter":
            [
              { "id": "1001", "type": "Regular" },
              { "id": "1002", "type": "Chocolate" }
            ]
        },
        "topping":
          [
            { "id": "5001", "type": "None" },
            { "id": "5002", "type": "Glazed" },
            { "id": "5003", "type": "Chocolate" },
            { "id": "5004", "type": "Maple" }
          ]
      }
    ];

    run();

    function run() {
      hop(testObj, 0, 'response');
    }

    function p(...args) {
      console.log(...args);
    }

    function showPath(level, path) {
      var nbsp = "\u00A0";
      var dv = $('<div>')
      dv.text('level: ' + level + nbsp + nbsp + ' path: ' + path);
      $('#output').append(dv);
    }

    function hop(node, level, path) {
      var addToPath;

      if (node == null) {
        return;
      }

      if (node === Object(node)) {

        if (Array.isArray(node)) {

          var newNode = node[0];
          var children = Object.keys(newNode);
          var addToPath = '[0]';

        } else {
          var newNode = node;
          var children = Object.keys(newNode);
          var addToPath = '';

        }

        for (var i = 0; i < children.length; i++) {
          var child = newNode[children[i]];
          var nodePath = path + addToPath + '.' + children[i];
          p('level: ' + level + '  path: ' + nodePath);
          showPath(level, nodePath);
          hop(child, level + 1, nodePath);
        }
      } else {
        p('done');
      }

    }

  </script>

  <!-- <script src="assets/js/app.js"></script> -->
</body>

</html>